import { OnModuleInit, OnModuleDestroy } from '@nestjs/common';
import { ConfigService } from '@nestjs/config';
import { Client, RfqMapping, ProcessingConfig, DetectionKeyword, ProcessingLog } from './entities';
export declare class DatabaseService implements OnModuleInit, OnModuleDestroy {
    private configService;
    private readonly logger;
    private db;
    private dbPath;
    private saveInterval;
    constructor(configService: ConfigService);
    onModuleInit(): Promise<void>;
    onModuleDestroy(): void;
    private initDatabase;
    private createTables;
    private seedDefaultData;
    saveToFile(): void;
    createClient(client: Omit<Client, 'id' | 'createdAt' | 'updatedAt'>): Promise<Client | null>;
    getClientById(id: string): Promise<Client | null>;
    getClientByEmail(email: string): Promise<Client | null>;
    getClientByCode(code: string): Promise<Client | null>;
    getAllClients(): Promise<Client[]>;
    updateClient(id: string, updates: Partial<Client>): Promise<Client | null>;
    private mapRowToClient;
    createRfqMapping(mapping: Omit<RfqMapping, 'id' | 'processedAt'>): Promise<RfqMapping | null>;
    getRfqMappingById(id: string): Promise<RfqMapping | null>;
    getRfqMappingByClientRfq(clientRfqNumber: string): Promise<RfqMapping | null>;
    getRfqMappingByInternalRfq(internalRfqNumber: string): Promise<RfqMapping | null>;
    getClientRfqMappings(clientId: string): Promise<RfqMapping[]>;
    updateRfqMappingStatus(id: string, status: RfqMapping['status'], notes?: string): Promise<void>;
    getAllRfqMappings(limit?: number): Promise<RfqMapping[]>;
    private mapRowToRfqMapping;
    getProcessingConfig(): Promise<ProcessingConfig | null>;
    updateProcessingConfig(updates: Partial<ProcessingConfig>): Promise<void>;
    private mapRowToConfig;
    getDetectionKeywords(): Promise<DetectionKeyword[]>;
    addDetectionKeyword(keyword: Omit<DetectionKeyword, 'id'>): Promise<void>;
    addProcessingLog(log: Omit<ProcessingLog, 'id' | 'timestamp'>): Promise<void>;
    getProcessingLogs(limit?: number): Promise<ProcessingLog[]>;
    isEmailProcessed(emailId: string): Promise<boolean>;
    createPendingDraft(draft: {
        rfqMappingId?: string;
        internalRfqNumber: string;
        clientRfqNumber?: string;
        clientName?: string;
        clientEmail?: string;
        recipient: string;
        subject: string;
        excelPath: string;
        attachmentPaths?: string[];
    }): Promise<string>;
    getPendingDraftsToSend(): Promise<any[]>;
    updateDraftStatus(id: string, status: 'pending' | 'sent' | 'failed' | 'cancelled', errorMessage?: string): Promise<void>;
    getDraftById(id: string): Promise<any | null>;
    updateDraft(id: string, updates: {
        status?: string;
        itemsJson?: string;
        reviewNotes?: string;
        needsManualReview?: boolean;
        reviewedAt?: Date;
        reviewedBy?: string;
        originalPdfPath?: string;
        originalPdfFilename?: string;
        extractionMethod?: string;
        errorMessage?: string;
    }): Promise<any>;
    getAllDrafts(status?: string, limit?: number): Promise<any[]>;
    addOutputLog(log: {
        draftId?: string;
        rfqMappingId?: string;
        internalRfqNumber: string;
        clientRfqNumber?: string;
        clientName?: string;
        recipient: string;
        subject: string;
        excelPath?: string;
        attachmentCount?: number;
        action: 'draft_created' | 'email_sent' | 'send_failed' | 'manually_sent';
        status: 'success' | 'failed' | 'pending';
        errorMessage?: string;
    }): Promise<string>;
    getOutputLogs(limit?: number, status?: string): Promise<any[]>;
    getOutputLogsSummary(): Promise<{
        total: number;
        sent: number;
        failed: number;
        pending: number;
    }>;
    addKnownSupplier(name: string, email: string): Promise<void>;
    isKnownSupplier(email: string): Promise<boolean>;
    getAllKnownSuppliers(): Promise<any[]>;
    removeKnownSupplier(id: string): Promise<void>;
}
